@tailwind base;
@tailwind components;
@tailwind utilities;

/* iOS Safe Area Insets */
:root {
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);

    /* Default Fonts (will be overridden by FontContext) */
    --font-heading: 'Fredoka', sans-serif;
    --font-body: 'Manrope', sans-serif;
}

/* FOUT Prevention */
.fonts-loading {
    opacity: 0.98;
    transition: opacity 0.15s ease-in-out;
}

body {
    background-color: var(--color-background, #FFF8E7);
    color: var(--color-text, #5A5A5A);
    font-family: var(--font-body);
    overflow-x: hidden;
    /* iOS smooth scrolling */
    -webkit-overflow-scrolling: touch;
    /* Prevent iOS bounce/overscroll */
    overscroll-behavior: none;
}

/* Apply safe area padding to app container */
#root {
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
    min-height: 100vh;
    min-height: 100dvh;
    /* Dynamic viewport height for iOS */
}

/* Mobile touch improvements */
@media (max-width: 768px) {

    /* Prevent horizontal scrolling on mobile */
    html,
    body {
        overflow-x: hidden;
        max-width: 100vw;
    }

    /* Better touch targets */
    button,
    a,
    [role="button"] {
        min-height: 44px;
        /* iOS minimum touch target */
        -webkit-tap-highlight-color: transparent;
    }

    /* Prevent text selection on interactive elements */
    button,
    [role="button"] {
        -webkit-user-select: none;
        user-select: none;
    }

    /* Prevent pull-to-refresh on main content */
    .no-pull-refresh {
        overscroll-behavior-y: contain;
    }
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {

    /* Fix for iOS momentum scrolling */
    .scroll-container {
        -webkit-overflow-scrolling: touch;
    }

    /* Fix for iOS input zoom */
    input,
    select,
    textarea {
        font-size: 16px !important;
    }

    /* Fix for iOS 100vh issue */
    .h-screen-ios {
        height: 100vh;
        height: 100dvh;
    }
}

/* Tablet optimizations */
@media (min-width: 768px) and (max-width: 1024px) {

    /* iPad portrait and landscape adjustments */
    .tablet-container {
        padding: 1rem;
    }
}

/* Horizontal scrollable tabs - hide scrollbar */
.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
    display: none;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--color-background, #FFF8E7);
}

::-webkit-scrollbar-thumb {
    background: var(--color-border, #FFE4CC);
    border-radius: 5px;
    border: 2px solid var(--color-background, #FFF8E7);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--color-accent-end, #FFD93D);
}

/* Mobile bottom navigation safe area */
.mobile-bottom-nav {
    padding-bottom: calc(0.5rem + var(--safe-area-inset-bottom));
}

/* Collaborative mode mobile tab bar */
.collab-mobile-tabs {
    position: fixed;
    bottom: calc(4.5rem + var(--safe-area-inset-bottom));
    left: 0.5rem;
    right: 0.5rem;
    z-index: 40;
    display: flex;
    justify-content: center;
    gap: 0.25rem;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 1rem;
    padding: 0.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

/* Prevent content from being hidden behind mobile navs */
.mobile-content-padding {
    padding-bottom: calc(8rem + var(--safe-area-inset-bottom));
}